<Module>
<ModulePrefs title="Lemon Games | Portal"/>
<Content type="html">
<![CDATA[
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lemon Games</title>
<style>
html, body { margin:0; padding:0; width:100%; height:100%; overflow:hidden; font-family:Arial,sans-serif; background:#111; color:#fff;}
#menu { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); width:350px; background:#222; border-radius:20px; padding:30px; box-shadow:0 0 40px rgba(0,0,0,0.5); text-align:center; z-index:10;}
h1 { font-size:32px; margin-bottom:20px; color:#fff; text-shadow:0 0 5px #000;}
button { padding:15px 40px; font-size:18px; border:none; border-radius:10px; background:#fff; color:#111; cursor:pointer; transition:0.2s; }
button:hover { background:#ccc; }
#loading { display:none; margin-top:20px; font-size:16px; color:#fff; text-align:center;}
#game_frame { width:100%; height:100%; display:none; justify-content:center; align-items:center; background:#000;}

/* Floating dots */
.dot { position:absolute; width:5px; height:5px; border-radius:50%; animation: floatDots linear infinite; }
@keyframes floatDots {
  0% { transform: translateY(0) translateX(0); opacity:1; }
  50% { opacity:0.3; }
  100% { transform: translateY(-100vh) translateX(50px); opacity:1; }
}

/* cruel loading spinner */
.cruel-spinner { border: 5px solid #333; border-top: 5px solid #fff; border-radius: 50%; width: 50px; height: 50px; margin: 20px auto; animation: spin 1s linear infinite;}
@keyframes spin { 0% { transform: rotate(0deg);} 100% { transform: rotate(360deg);} }
</style>
<script src="https://cdn.jsdelivr.net/gh/mece188/feh@main/classes.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/mece188/feh@main/fix-webm-duration.js"></script>
<script>
window.addEventListener('load', () => {
  window.focus();

  if (!window.eaglercraftXOpts) {
    window.eaglercraftXOpts = {
      container: "game_frame",
      assetsURI: "https://cdn.jsdelivr.net/gh/mece188/feh@main/assets.epk",
      localesURI: "lang/",
      servers: [
        { addr: "wss://mc.arch.lol/", name: "ArchMC" }
      ]
    };
  }

  // Create black & white floating dots
  const dots = [];
  for(let i=0;i<60;i++){
    const dot = document.createElement('div');
    dot.className='dot';
    dot.style.background = Math.random() < 0.5 ? '#fff' : '#000';
    dot.style.left=Math.random()*100+'vw';
    dot.style.top=Math.random()*100+'vh';
    dot.style.width=(3+Math.random()*6)+'px';
    dot.style.height=dot.style.width;
    dot.style.animationDuration=(4+Math.random()*6)+'s';
    document.body.appendChild(dot);
    dots.push(dot);
  }

  const menu = document.getElementById('menu');
  const gameFrame = document.getElementById('game_frame');
  const playBtn = document.getElementById('play_game');
  const loadingDiv = document.getElementById('loading');

  playBtn.addEventListener('click', () => {
    // hide menu
    menu.style.display = 'none';

    // remove floating dots
    dots.forEach(d => d.remove());

    // show game frame and loading spinner
    gameFrame.style.display = 'flex';
    loadingDiv.style.display = 'block';

    setTimeout(() => {
      try { main(); } catch(e) { console.error("Error starting EaglercraftX:", e);}
    }, 1000);
  });
});
</script>
</head>
<body>
<div id="menu">
  <h1>Lemon Games</h1>
  <button id="play_game">Play</button>
  <div id="loading">
    <div class="cruel-spinner"></div>
    Loading EaglercraftX...
  </div>
</div>
<div id="game_frame"></div>
<div class="_eaglercraftX_wrapper_element"></div>
<div id="_eaglercraftX_crashReason" style="display:none;"></div>
<div id="_eaglercraftX_crashUserAgent" style="display:none;"></div>
</body>
</html>
]]>
</Content>
</Module>
